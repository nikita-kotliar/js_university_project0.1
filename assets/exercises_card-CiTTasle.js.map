{"version":3,"file":"exercises_card-CiTTasle.js","sources":["../../src/js/localalStorageLogical.js","../../src/js/favourite_exercises.js","../../src/js/rate.js","../../src/js/exercises_card.js"],"sourcesContent":["export const LS_FAV = 'favouriteExercises';\r\nconst QUOTE_KEY = 'quote';\r\nconst QUOTE_TIME_KEY = 'quote_time';\r\nconst ONE_DAY_MS = 86_400_000; // 24 * 60 * 60 * 1000\r\n\r\nexport const setFav = arr => localStorage.setItem(LS_FAV, JSON.stringify(arr));\r\n\r\nexport const getFav = key => {\r\n  try {\r\n    const data = localStorage.getItem(key);\r\n    return data ? JSON.parse(data) : [];\r\n  } catch (err) {\r\n    console.error('Error parsing JSON:', err.message);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const removeFromFav = id => {\r\n  const updated = getFav(LS_FAV).filter(item => item._id !== id);\r\n  setFav(updated);\r\n};\r\n\r\nasync function fetchQuote() {\r\n  const response = await fetch('https://your-energy.b.goit.study/api/quote');\r\n  return response.json();\r\n}\r\n\r\nasync function getQuote() {\r\n  const storedQuote = localStorage.getItem(QUOTE_KEY);\r\n  const storedTime = localStorage.getItem(QUOTE_TIME_KEY);\r\n\r\n  if (\r\n    storedQuote &&\r\n    storedTime &&\r\n    Date.now() - Number(storedTime) < ONE_DAY_MS\r\n  ) {\r\n    return JSON.parse(storedQuote);\r\n  }\r\n\r\n  try {\r\n    const data = await fetchQuote();\r\n    localStorage.setItem(QUOTE_KEY, JSON.stringify(data));\r\n    localStorage.setItem(QUOTE_TIME_KEY, Date.now().toString());\r\n    return data;\r\n  } catch (err) {\r\n    console.error('Error fetching quote:', err);\r\n    return storedQuote\r\n      ? JSON.parse(storedQuote)\r\n      : { quote: 'No quote available', author: '' };\r\n  }\r\n}\r\n\r\nconst renderQuoteHTML = (quote, author) => `\r\n  <svg width=\"32\" height=\"32\" class=\"quote-text-icon\">\r\n    <use href=\"/js_university_project0.1/symbol-defs.svg#icon-run\"></use>\r\n  </svg>\r\n  <div>\r\n    <h3 class=\"main-quote-title\">Quote of the day</h3>\r\n    <p class=\"main-quote-text\">${quote}</p>\r\n    <p class=\"main-quote-author\">${author}</p>\r\n    <svg width=\"24\" height=\"24\" class=\"quote-text-icon-commas\">\r\n      <use href=\"/js_university_project0.1/symbol-defs.svg#icon-commas\"></use>\r\n    </svg>\r\n  </div>\r\n`;\r\n\r\nexport const displayQuote = async quoteContainer => {\r\n  const { quote, author } = await getQuote();\r\n  quoteContainer.innerHTML = renderQuoteHTML(quote, author);\r\n};\r\n","import handlerStartBtn from './exercises_card.js';\r\nimport {\r\n  getFav,\r\n  removeFromFav,\r\n  LS_FAV,\r\n  displayQuote,\r\n} from './localalStorageLogical.js';\r\n\r\n/* ================= REFS ================= */\r\nconst refs = {\r\n  root: document.querySelector('.scrollbar_custom'),\r\n  quoteContainer: document.querySelector('.quote'),\r\n};\r\n\r\n/* ================= STATE ================= */\r\nlet page = 1;\r\nconst CARDS_PER_PAGE = 8;\r\n\r\n/* ================= HELPERS ================= */\r\nconst getCardsByPage = (arr, page) => {\r\n  const start = (page - 1) * CARDS_PER_PAGE;\r\n  return arr.slice(start, start + CARDS_PER_PAGE);\r\n};\r\n\r\nconst uniqueIdFilter = (arr = []) => {\r\n  const ids = new Set();\r\n  return arr.filter(el => {\r\n    if (!el?._id || ids.has(el._id)) return false;\r\n    ids.add(el._id);\r\n    return true;\r\n  });\r\n};\r\n\r\n/* ================= MARKUP ================= */\r\nfunction renderNoCards() {\r\n  refs.root.innerHTML = `\r\n    <div class=\"no_cards_wrapper-container\">\r\n      <p class=\"no_cards_wrapper\">\r\n        It appears that you haven't added any exercises to your favorites yet.\r\n        To get started, you can add exercises that you like to your favorites\r\n        for easier access in the future.\r\n      </p>\r\n    </div>\r\n  `;\r\n}\r\n\r\nfunction renderCards(cards) {\r\n  return `\r\n    <ul class=\"fav_card_list\">\r\n      ${cards\r\n        .map(({ name, _id, burnedCalories, bodyPart, target, time = 3 }) => {\r\n          let calories = `${burnedCalories} / ${time} min`;\r\n\r\n          return `\r\n            <li class=\"exercise-information\" data-id-card=\"${_id}\">\r\n              <div class=\"top-nav\">\r\n                <div>\r\n                  <p class=\"tag\">Workout</p>\r\n                  <button\r\n                    data-action=\"delete\"\r\n                    data-id=\"${_id}\"\r\n                    class=\"trash-btn\">\r\n                    <svg width=\"16\" height=\"16\">\r\n                      <use href=\"/js_university_project0.1/symbol-defs.svg#icon-trash\"></use>\r\n                    </svg>\r\n                  </button>\r\n                </div>\r\n\r\n                <button\r\n                  data-action=\"start\"\r\n                  data-id=\"${_id}\"\r\n                  class=\"details-link\">\r\n                  Start\r\n                  <svg width=\"16\" height=\"16\">\r\n                    <use href=\"/js_university_project0.1/symbol-defs.svg#icon-arrow\"></use>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n\r\n              <div class=\"exercise-header\">\r\n                <svg width=\"24\" height=\"24\">\r\n                  <use href=\"/js_university_project0.1/symbol-defs.svg#icon-run\"></use>\r\n                </svg>\r\n                <h2 class=\"exercise-name\">${name}</h2>\r\n              </div>\r\n\r\n              <ul class=\"exercise-details\">\r\n                <li><span>Burned calories:</span> ${calories}</li>\r\n                <li><span>Body part:</span> ${bodyPart}</li>\r\n                <li><span>Target:</span> ${target}</li>\r\n              </ul>\r\n            </li>\r\n          `;\r\n        })\r\n        .join('')}\r\n    </ul>\r\n  `;\r\n}\r\n\r\nfunction renderPagination(totalPages) {\r\n  if (totalPages <= 1) return '';\r\n\r\n  let html = '<ul class=\"nav-buttons pagination\">';\r\n\r\n  const btn = p => `\r\n    <li>\r\n      <button\r\n        class=\"pagination-btn ${p === page ? 'active' : ''}\"\r\n        data-page=\"${p}\">\r\n        ${p}\r\n      </button>\r\n    </li>\r\n  `;\r\n\r\n  let start = Math.max(1, page - 1);\r\n  let end = Math.min(totalPages, page + 1);\r\n\r\n  if (page === 1) end = Math.min(totalPages, 3);\r\n  if (page === totalPages) start = Math.max(1, totalPages - 2);\r\n\r\n  if (start > 1) {\r\n    html += btn(1);\r\n    if (start > 2) html += `<li class=\"dots\">...</li>`;\r\n  }\r\n\r\n  for (let i = start; i <= end; i++) html += btn(i);\r\n\r\n  if (end < totalPages) {\r\n    if (end < totalPages - 1) html += `<li class=\"dots\">...</li>`;\r\n    html += btn(totalPages);\r\n  }\r\n\r\n  html += '</ul>';\r\n  return html;\r\n}\r\n\r\nexport function checkStorage() {\r\n  if (!refs.root) return;\r\n\r\n  const favs = uniqueIdFilter(getFav(LS_FAV) || []);\r\n\r\n  if (!favs.length) {\r\n    renderNoCards();\r\n    return;\r\n  }\r\n\r\n  const totalPages = Math.ceil(favs.length / CARDS_PER_PAGE);\r\n  if (page > totalPages) page = totalPages;\r\n\r\n  const cards = window.innerWidth < 1440 ? getCardsByPage(favs, page) : favs;\r\n\r\n  refs.root.innerHTML =\r\n    renderCards(cards) +\r\n    (window.innerWidth < 1440 ? renderPagination(totalPages) : '');\r\n}\r\n\r\nrefs.root?.addEventListener('click', e => {\r\n  const del = e.target.closest('[data-action=\"delete\"]');\r\n  const start = e.target.closest('[data-action=\"start\"]');\r\n  const pageBtn = e.target.closest('.pagination-btn');\r\n\r\n  if (del) {\r\n    removeFromFav(del.dataset.id);\r\n    checkStorage();\r\n  }\r\n\r\n  if (start) {\r\n    const favs = getFav(LS_FAV) || [];\r\n    const exercise = favs.find(el => el._id === start.dataset.id);\r\n    if (exercise) handlerStartBtn(exercise, true, true);\r\n  }\r\n\r\n  if (pageBtn) {\r\n    const newPage = Number(pageBtn.dataset.page);\r\n    if (newPage !== page) {\r\n      page = newPage;\r\n      checkStorage();\r\n    }\r\n  }\r\n});\r\n\r\nwindow.addEventListener('resize', () => {\r\n  page = 1;\r\n  checkStorage();\r\n});\r\n\r\ncheckStorage();\r\ndisplayQuote(refs.quoteContainer);\r\n","export async function addExerciseRatingById(id, { email, rate, comment }) {\r\n  const url = `https://your-energy.b.goit.study/api/exercises/${id}/rating`;\r\n  rate = Number(rate);\r\n\r\n  const response = await fetch(url, {\r\n    method: 'PATCH',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      email,\r\n      rate,\r\n      review: comment,\r\n    }),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json();\r\n    throw new Error(errorData.message || 'Rating failed');\r\n  }\r\n\r\n  return response.json();\r\n}\r\n\r\nconst formCloseBtn = document.getElementById('form-close-btn');\r\nconst backdrop = document.querySelector('.backdrop');\r\nconst userEmail = document.querySelector('#user-email');\r\nconst userComment = document.getElementById('user-comment');\r\nconst formSendBtn = document.querySelector('.form-send-btn');\r\nconst ratingWrapper = document.querySelector('.rating-wrapper');\r\nconst ratingStarValue = document.querySelector('.rating-star-value');\r\nconst backdropForm = document.querySelector('.backdrop-form');\r\n\r\nlet exerciseId = null;\r\nconst userFeedback = {\r\n  rate: 0,\r\n  email: '',\r\n  comment: '',\r\n};\r\n\r\nformSendBtn.disabled = false;\r\n\r\nfunction resetForm() {\r\n  userEmail.value = '';\r\n  userComment.value = '';\r\n  userFeedback.rate = 0;\r\n  userFeedback.comment = '';\r\n  userFeedback.email = '';\r\n\r\n  ratingStarValue.textContent = '0.0';\r\n\r\n  const ratingStarIcons = document.querySelectorAll('.rating-star-icons');\r\n  ratingStarIcons.forEach(icon => {\r\n    icon.style.fill = 'var(--white-20)';\r\n  });\r\n}\r\n\r\nformCloseBtn.addEventListener('click', () => {\r\n  backdrop.classList.remove('is-open');\r\n});\r\n\r\nbackdrop.addEventListener('click', event => {\r\n  if (event.target === backdrop) backdrop.classList.remove('is-open');\r\n});\r\n\r\nratingWrapper.addEventListener('click', event => {\r\n  const ratingStarIcons = document.querySelectorAll('.rating-star-icons');\r\n  if (!event.target.dataset.id) return;\r\n\r\n  userFeedback.rate = Number(event.target.dataset.id);\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    ratingStarIcons[i].style.fill =\r\n      i < userFeedback.rate ? 'var(--star-color)' : 'var(--white-20)';\r\n  }\r\n\r\n  ratingStarValue.textContent = `${userFeedback.rate}.0`;\r\n});\r\n\r\nexport function handlerOpenRate(id) {\r\n  exerciseId = id;\r\n  backdrop.classList.add('is-open');\r\n}\r\n\r\nbackdropForm.addEventListener('submit', handlerAddRate);\r\n\r\nasync function handlerAddRate(event) {\r\n  event.preventDefault();\r\n  userFeedback.email = userEmail.value.trim();\r\n  userFeedback.comment = userComment.value.trim() || undefined;\r\n\r\n  if (!userFeedback.rate) {\r\n    alert('Please select a rating');\r\n    return;\r\n  }\r\n\r\n  if (!userFeedback.email) {\r\n    alert('Please enter your email');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await addExerciseRatingById(exerciseId, userFeedback);\r\n    alert('Your rating is accepted');\r\n    resetForm();\r\n    backdrop.classList.remove('is-open');\r\n  } catch (error) {\r\n    alert(`Error: ${error.message}`);\r\n  }\r\n}\r\n","\r\nimport * as localStorageLogic from './localalStorageLogical';\r\nimport { checkStorage } from './favourite_exercises';\r\nimport { handlerOpenRate } from './rate';\r\n\r\nconst cardBackdrop = document.querySelector('.exr-card-backdrop');\r\nlet isFavourite = false;\r\nlet savedExercises = [];\r\nlet tempArray = JSON.parse(localStorage.getItem('favourite'));\r\nif (tempArray) {\r\n  tempArray.forEach(element => {\r\n    if (!savedExercises[0]) savedExercises[0] = element;\r\n    savedExercises.push(element);\r\n  });\r\n}\r\n\r\nfunction capitalizeFirstLetter(string) {\r\n  return `${string.charAt(0).toUpperCase()}${string.slice(1)}`;\r\n}\r\n\r\nexport default function handlerStartBtn(\r\n  exercise,\r\n  isFav = false,\r\n  isFavouritePage = false\r\n) {\r\n  isFavourite = isFav;\r\n  if (!isFavourite) {\r\n    savedExercises.forEach(element => {\r\n      if (element._id === exercise._id) isFavourite = true;\r\n    });\r\n  }\r\n\r\n  renderModal(exercise);\r\n  cardBackdrop.classList.add('card-is-open');\r\n  document.body.classList.add('not-scrollable');\r\n\r\n  if (isFavourite === true) {\r\n    document.querySelector('.add-favourite-btn').innerHTML = `Remove from\r\n          <svg class=\"heart-icon\">\r\n            <use href=\"/js_university_projectNew/symbol-defs.svg#icon-heart\"></use>\r\n          </svg>`;\r\n  }\r\n}\r\n\r\nfunction renderModal(data, isFavouritePage) {\r\n  let rating = data.rating;\r\n  if (rating % 1 === 0) rating += '.0';\r\n  rating = parseFloat(rating).toFixed(1);\r\n  const markup = `\r\n    <div class=\"exr-card-cont\">\r\n      <button name=\"close\" id=\"close-card\" type=\"button\" class=\"close-card-button\">\r\n      <svg class=\"close-card-icon\"\">\r\n        <use href=\"/js_university_project0.1/symbol-defs.svg#icon-x\"></use>\r\n      </svg>\r\n      </button>\r\n      <img src=\"${data.gifUrl}\" alt=\"example-img\" class=\"exr-image\" />\r\n      <div>\r\n      <h3 class=\"exercise-name\">${capitalizeFirstLetter(data.name)}</h3>\r\n      <div class=\"rating-container\">\r\n        <ul class=\"star-rating-list\">\r\n          <li>\r\n            <p class=\"rating-score\">${rating}</p>\r\n          </li>\r\n          <li>\r\n            <svg class=\"star-rating-icon\" width=\"14px\" height=\"14px\">\r\n              <use href=\"/js_university_project0.1/symbol-defs.svg#icon-star\"></use>\r\n            </svg>\r\n          </li>\r\n          <li>\r\n            <svg class=\"star-rating-icon\" width=\"14px\" height=\"14px\">\r\n              <use href=\"/js_university_project0.1/symbol-defs.svg#icon-star\"></use>\r\n            </svg>\r\n          </li>\r\n          <li>\r\n            <svg class=\"star-rating-icon\" width=\"14px\" height=\"14px\">\r\n              <use href=\"/js_university_project0.1/symbol-defs.svg#icon-star\"></use>\r\n            </svg>\r\n          </li>\r\n          <li>\r\n            <svg class=\"star-rating-icon\" width=\"14px\" height=\"14px\">\r\n              <use href=\"/js_university_project0.1/symbol-defs.svg#icon-star\"></use>\r\n            </svg>\r\n          </li>\r\n          <li>\r\n            <svg class=\"star-rating-icon\" width=\"14px\" height=\"14px\">\r\n              <use href=\"/js_university_project0.1/symbol-defs.svg#icon-star\"></use>\r\n            </svg>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"exr-information-container\">\r\n        <div class=\"exr-info-block\">\r\n          <p class=\"info-label\">Target</p>\r\n          <p class=\"exr-info\" id=\"exr-target\">${capitalizeFirstLetter(\r\n            data.target\r\n          )}</p>\r\n        </div>\r\n        <div class=\"exr-info-block\">\r\n          <p class=\"info-label\">Body Part</p>\r\n          <p class=\"exr-info\" id=\"body-part\">${capitalizeFirstLetter(\r\n            data.bodyPart\r\n          )}</p>\r\n        </div>\r\n        <div class=\"exr-info-block\">\r\n          <p class=\"info-label\">Equipment</p>\r\n          <p class=\"exr-info\" id=\"exr-equip\">${capitalizeFirstLetter(\r\n            data.equipment\r\n          )}</p>\r\n        </div>\r\n        <div class=\"exr-info-block\">\r\n          <p class=\"info-label\">Popular</p>\r\n          <p class=\"exr-info\" id=\"exr-popularity\">${data.popularity}</p>\r\n        </div>\r\n        <div class=\"exr-info-block\">\r\n          <p class=\"info-label\">Burned Calories</p>\r\n          <p class=\"exr-info\" id=\"burned-cal\">${data.burnedCalories}/${data.time} min</p>\r\n        </div>\r\n      </div>\r\n      <p class=\"exr-description\">${data.description}</p>\r\n      <div class=\"buttons-cont\">\r\n        <button name=\"add-favorurite\" class=\"add-favourite-btn\">\r\n          Add to favourites\r\n          <svg class=\"heart-icon\" width=\"20px\" height=\"20px\">\r\n            <use href=\"/js_university_project0.1/symbol-defs.svg#icon-heart\"></use>\r\n          </svg>\r\n        </button>\r\n        <button name=\"rating\" class=\"give-rating-btn\">Give a rating</button>\r\n      </div>\r\n    </div>`;\r\n  cardBackdrop.innerHTML = markup;\r\n  const arrStar = document.querySelectorAll('.star-rating-icon');\r\n  for (let i = 0; i < Math.round(data.rating); ++i) {\r\n    arrStar[i].style.fill = '#eea10c';\r\n  }\r\n\r\n  const addFavBtn = document.querySelector('.add-favourite-btn');\r\n\r\n  addFavBtn.addEventListener('click', function () {\r\n    if (!isFavourite) {\r\n      savedExercises.push(data);\r\n      localStorageLogic.setFav(savedExercises);\r\n      addFavBtn.innerHTML = `Remove from\r\n          <svg class=\"heart-icon\" width=\"20px\" height=\"20px\">\r\n            <use href=\"/js_university_project0.1/symbol-defs.svg#icon-heart\"></use>\r\n          </svg>`;\r\n      isFavourite = true;\r\n    } else {\r\n      localStorageLogic.removeFromFav(data._id);\r\n      addFavBtn.innerHTML = `Add to favourite\r\n          <svg class=\"heart-icon\" width=\"20px\" height=\"20px\">\r\n            <use href=\"/js_university_project0.1/symbol-defs.svg#icon-heart\"></use>\r\n          </svg>`;\r\n      isFavourite = false;\r\n    }\r\n    checkStorage();\r\n  });\r\n\r\n  document.getElementById('close-card').addEventListener('click', () => {\r\n    cardBackdrop.classList.remove('card-is-open');\r\n    document.body.classList.remove('not-scrollable');\r\n  });\r\n\r\n  cardBackdrop.addEventListener('click', event => {\r\n    if (event.target === cardBackdrop) {\r\n      cardBackdrop.classList.remove('card-is-open');\r\n      document.body.classList.remove('not-scrollable');\r\n    }\r\n  });\r\n\r\n  document.querySelector('.give-rating-btn').addEventListener('click', () => {\r\n    cardBackdrop.classList.remove('card-is-open');\r\n    document.body.classList.remove('not-scrollable');\r\n    handlerOpenRate(data._id);\r\n  });\r\n}\r\n"],"names":["LS_FAV","QUOTE_KEY","QUOTE_TIME_KEY","ONE_DAY_MS","setFav","arr","getFav","key","data","err","removeFromFav","id","updated","item","fetchQuote","getQuote","storedQuote","storedTime","renderQuoteHTML","quote","author","displayQuote","quoteContainer","refs","page","CARDS_PER_PAGE","getCardsByPage","start","uniqueIdFilter","ids","el","renderNoCards","renderCards","cards","name","_id","burnedCalories","bodyPart","target","time","calories","renderPagination","totalPages","html","btn","p","end","i","checkStorage","favs","_a","del","pageBtn","exercise","handlerStartBtn","newPage","addExerciseRatingById","email","rate","comment","url","response","errorData","formCloseBtn","backdrop","userEmail","userComment","formSendBtn","ratingWrapper","ratingStarValue","backdropForm","exerciseId","userFeedback","resetForm","icon","event","ratingStarIcons","handlerOpenRate","handlerAddRate","error","cardBackdrop","isFavourite","savedExercises","tempArray","element","capitalizeFirstLetter","string","isFav","isFavouritePage","renderModal","rating","markup","arrStar","addFavBtn","localStorageLogic.removeFromFav","localStorageLogic.setFav"],"mappings":"ssBAAO,MAAMA,EAAS,qBAChBC,EAAY,QACZC,EAAiB,aACjBC,EAAa,MAENC,EAASC,GAAO,aAAa,QAAQL,EAAQ,KAAK,UAAUK,CAAG,CAAC,EAEhEC,EAASC,GAAO,CAC3B,GAAI,CACF,MAAMC,EAAO,aAAa,QAAQD,CAAG,EACrC,OAAOC,EAAO,KAAK,MAAMA,CAAI,EAAI,CAAA,CAClC,OAAQC,EAAK,CACZ,eAAQ,MAAM,sBAAuBA,EAAI,OAAO,EACzC,EACR,CACH,EAEaC,EAAgBC,GAAM,CACjC,MAAMC,EAAUN,EAAON,CAAM,EAAE,OAAOa,GAAQA,EAAK,MAAQF,CAAE,EAC7DP,EAAOQ,CAAO,CAChB,EAEA,eAAeE,GAAa,CAE1B,OADiB,MAAM,MAAM,4CAA4C,GACzD,MAClB,CAEA,eAAeC,GAAW,CACxB,MAAMC,EAAc,aAAa,QAAQf,CAAS,EAC5CgB,EAAa,aAAa,QAAQf,CAAc,EAEtD,GACEc,GACAC,GACA,KAAK,IAAK,EAAG,OAAOA,CAAU,EAAId,EAElC,OAAO,KAAK,MAAMa,CAAW,EAG/B,GAAI,CACF,MAAMR,EAAO,MAAMM,IACnB,oBAAa,QAAQb,EAAW,KAAK,UAAUO,CAAI,CAAC,EACpD,aAAa,QAAQN,EAAgB,KAAK,IAAK,EAAC,SAAQ,CAAE,EACnDM,CACR,OAAQC,EAAK,CACZ,eAAQ,MAAM,wBAAyBA,CAAG,EACnCO,EACH,KAAK,MAAMA,CAAW,EACtB,CAAE,MAAO,qBAAsB,OAAQ,EAAE,CAC9C,CACH,CAEA,MAAME,EAAkB,CAACC,EAAOC,IAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMVD,CAAK;AAAA,mCACHC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA,EAO5BC,EAAe,MAAMC,GAAkB,CAClD,KAAM,CAAE,MAAAH,EAAO,OAAAC,GAAW,MAAML,EAAQ,EACxCO,EAAe,UAAYJ,EAAgBC,EAAOC,CAAM,CAC1D,EC5DMG,EAAO,CACX,KAAM,SAAS,cAAc,mBAAmB,EAChD,eAAgB,SAAS,cAAc,QAAQ,CACjD,EAGA,IAAIC,EAAO,EACX,MAAMC,EAAiB,EAGjBC,EAAiB,CAACrB,EAAKmB,IAAS,CACpC,MAAMG,GAASH,EAAO,GAAKC,EAC3B,OAAOpB,EAAI,MAAMsB,EAAOA,EAAQF,CAAc,CAChD,EAEMG,EAAiB,CAACvB,EAAM,KAAO,CACnC,MAAMwB,EAAM,IAAI,IAChB,OAAOxB,EAAI,OAAOyB,GACZ,EAACA,GAAA,MAAAA,EAAI,MAAOD,EAAI,IAAIC,EAAG,GAAG,EAAU,IACxCD,EAAI,IAAIC,EAAG,GAAG,EACP,GACR,CACH,EAGA,SAASC,GAAgB,CACvBR,EAAK,KAAK,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASxB,CAEA,SAASS,EAAYC,EAAO,CAC1B,MAAO;AAAA;AAAA,QAEDA,EACC,IAAI,CAAC,CAAE,KAAAC,EAAM,IAAAC,EAAK,eAAAC,EAAgB,SAAAC,EAAU,OAAAC,EAAQ,KAAAC,EAAO,KAAQ,CAClE,IAAIC,EAAW,GAAGJ,CAAc,MAAMG,CAAI,OAE1C,MAAO;AAAA,6DAC4CJ,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAMjCA,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAULA,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAaYD,CAAI;AAAA;AAAA;AAAA;AAAA,oDAIIM,CAAQ;AAAA,8CACdH,CAAQ;AAAA,2CACXC,CAAM;AAAA;AAAA;AAAA,WAIjD,CAAS,EACA,KAAK,EAAE,CAAC;AAAA;AAAA,GAGjB,CAEA,SAASG,EAAiBC,EAAY,CACpC,GAAIA,GAAc,EAAG,MAAO,GAE5B,IAAIC,EAAO,sCAEX,MAAMC,EAAMC,GAAK;AAAA;AAAA;AAAA,gCAGaA,IAAMrB,EAAO,SAAW,EAAE;AAAA,qBACrCqB,CAAC;AAAA,UACZA,CAAC;AAAA;AAAA;AAAA,IAKT,IAAIlB,EAAQ,KAAK,IAAI,EAAGH,EAAO,CAAC,EAC5BsB,EAAM,KAAK,IAAIJ,EAAYlB,EAAO,CAAC,EAEnCA,IAAS,IAAGsB,EAAM,KAAK,IAAIJ,EAAY,CAAC,GACxClB,IAASkB,IAAYf,EAAQ,KAAK,IAAI,EAAGe,EAAa,CAAC,GAEvDf,EAAQ,IACVgB,GAAQC,EAAI,CAAC,EACTjB,EAAQ,IAAGgB,GAAQ,8BAGzB,QAASI,EAAIpB,EAAOoB,GAAKD,EAAKC,IAAKJ,GAAQC,EAAIG,CAAC,EAEhD,OAAID,EAAMJ,IACJI,EAAMJ,EAAa,IAAGC,GAAQ,6BAClCA,GAAQC,EAAIF,CAAU,GAGxBC,GAAQ,QACDA,CACT,CAEO,SAASK,GAAe,CAC7B,GAAI,CAACzB,EAAK,KAAM,OAEhB,MAAM0B,EAAOrB,EAAetB,EAAON,CAAM,GAAK,CAAE,CAAA,EAEhD,GAAI,CAACiD,EAAK,OAAQ,CAChBlB,IACA,MACD,CAED,MAAMW,EAAa,KAAK,KAAKO,EAAK,OAASxB,CAAc,EACrDD,EAAOkB,IAAYlB,EAAOkB,GAE9B,MAAMT,EAAQ,OAAO,WAAa,KAAOP,EAAeuB,EAAMzB,CAAI,EAAIyB,EAEtE1B,EAAK,KAAK,UACRS,EAAYC,CAAK,GAChB,OAAO,WAAa,KAAOQ,EAAiBC,CAAU,EAAI,GAC/D,QAEAQ,EAAA3B,EAAK,OAAL,MAAA2B,EAAW,iBAAiB,QAAS,GAAK,CACxC,MAAMC,EAAM,EAAE,OAAO,QAAQ,wBAAwB,EAC/CxB,EAAQ,EAAE,OAAO,QAAQ,uBAAuB,EAChDyB,EAAU,EAAE,OAAO,QAAQ,iBAAiB,EAOlD,GALID,IACFzC,EAAcyC,EAAI,QAAQ,EAAE,EAC5BH,KAGErB,EAAO,CAET,MAAM0B,GADO/C,EAAON,CAAM,GAAK,CAAA,GACT,KAAK8B,GAAMA,EAAG,MAAQH,EAAM,QAAQ,EAAE,EACxD0B,GAAUC,EAAgBD,EAAU,GAAM,EAAI,CACnD,CAED,GAAID,EAAS,CACX,MAAMG,EAAU,OAAOH,EAAQ,QAAQ,IAAI,EACvCG,IAAY/B,IACdA,EAAO+B,EACPP,IAEH,CACH,GAEA,OAAO,iBAAiB,SAAU,IAAM,CACtCxB,EAAO,EACPwB,GACF,CAAC,EAEDA,IACA3B,EAAaE,EAAK,cAAc,EC3LzB,eAAeiC,EAAsB7C,EAAI,CAAE,MAAA8C,EAAO,KAAAC,EAAM,QAAAC,CAAO,EAAI,CACxE,MAAMC,EAAM,kDAAkDjD,CAAE,UAChE+C,EAAO,OAAOA,CAAI,EAElB,MAAMG,EAAW,MAAM,MAAMD,EAAK,CAChC,OAAQ,QACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAU,CACnB,MAAAH,EACA,KAAAC,EACA,OAAQC,CACd,CAAK,CACL,CAAG,EAED,GAAI,CAACE,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,OACjC,MAAM,IAAI,MAAMC,EAAU,SAAW,eAAe,CACrD,CAED,OAAOD,EAAS,MAClB,CAEA,MAAME,EAAe,SAAS,eAAe,gBAAgB,EACvDC,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAkB,SAAS,cAAc,oBAAoB,EAC7DC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,IAAIC,EAAa,KACjB,MAAMC,EAAe,CACnB,KAAM,EACN,MAAO,GACP,QAAS,EACX,EAEAL,EAAY,SAAW,GAEvB,SAASM,GAAY,CACnBR,EAAU,MAAQ,GAClBC,EAAY,MAAQ,GACpBM,EAAa,KAAO,EACpBA,EAAa,QAAU,GACvBA,EAAa,MAAQ,GAErBH,EAAgB,YAAc,MAEN,SAAS,iBAAiB,oBAAoB,EACtD,QAAQK,GAAQ,CAC9BA,EAAK,MAAM,KAAO,iBACtB,CAAG,CACH,CAEAX,EAAa,iBAAiB,QAAS,IAAM,CAC3CC,EAAS,UAAU,OAAO,SAAS,CACrC,CAAC,EAEDA,EAAS,iBAAiB,QAASW,GAAS,CACtCA,EAAM,SAAWX,GAAUA,EAAS,UAAU,OAAO,SAAS,CACpE,CAAC,EAEDI,EAAc,iBAAiB,QAASO,GAAS,CAC/C,MAAMC,EAAkB,SAAS,iBAAiB,oBAAoB,EACtE,GAAKD,EAAM,OAAO,QAAQ,GAE1B,CAAAH,EAAa,KAAO,OAAOG,EAAM,OAAO,QAAQ,EAAE,EAElD,QAAS5B,EAAI,EAAGA,EAAI,EAAGA,IACrB6B,EAAgB7B,CAAC,EAAE,MAAM,KACvBA,EAAIyB,EAAa,KAAO,oBAAsB,kBAGlDH,EAAgB,YAAc,GAAGG,EAAa,IAAI,KACpD,CAAC,EAEM,SAASK,EAAgBlE,EAAI,CAClC4D,EAAa5D,EACbqD,EAAS,UAAU,IAAI,SAAS,CAClC,CAEAM,EAAa,iBAAiB,SAAUQ,CAAc,EAEtD,eAAeA,EAAeH,EAAO,CAKnC,GAJAA,EAAM,eAAc,EACpBH,EAAa,MAAQP,EAAU,MAAM,KAAI,EACzCO,EAAa,QAAUN,EAAY,MAAM,KAAI,GAAM,OAE/C,CAACM,EAAa,KAAM,CACtB,MAAM,wBAAwB,EAC9B,MACD,CAED,GAAI,CAACA,EAAa,MAAO,CACvB,MAAM,yBAAyB,EAC/B,MACD,CAED,GAAI,CACF,MAAMhB,EAAsBe,EAAYC,CAAY,EACpD,MAAM,yBAAyB,EAC/BC,IACAT,EAAS,UAAU,OAAO,SAAS,CACpC,OAAQe,EAAO,CACd,MAAM,UAAUA,EAAM,OAAO,EAAE,CAChC,CACH,CCxGA,MAAMC,EAAe,SAAS,cAAc,oBAAoB,EAChE,IAAIC,EAAc,GACdC,EAAiB,CAAA,EACjBC,EAAY,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,EACxDA,GACFA,EAAU,QAAQC,GAAW,CACtBF,EAAe,CAAC,IAAGA,EAAe,CAAC,EAAIE,GAC5CF,EAAe,KAAKE,CAAO,CAC/B,CAAG,EAGH,SAASC,EAAsBC,EAAQ,CACrC,MAAO,GAAGA,EAAO,OAAO,CAAC,EAAE,aAAa,GAAGA,EAAO,MAAM,CAAC,CAAC,EAC5D,CAEe,SAAShC,EACtBD,EACAkC,EAAQ,GACRC,EAAkB,GAClB,CACAP,EAAcM,EACTN,GACHC,EAAe,QAAQE,GAAW,CAC5BA,EAAQ,MAAQ/B,EAAS,MAAK4B,EAAc,GACtD,CAAK,EAGHQ,EAAYpC,CAAQ,EACpB2B,EAAa,UAAU,IAAI,cAAc,EACzC,SAAS,KAAK,UAAU,IAAI,gBAAgB,EAExCC,IAAgB,KAClB,SAAS,cAAc,oBAAoB,EAAE,UAAY;AAAA;AAAA;AAAA,kBAK7D,CAEA,SAASQ,EAAYjF,EAAMgF,EAAiB,CAC1C,IAAIE,EAASlF,EAAK,OACdkF,EAAS,IAAM,IAAGA,GAAU,MAChCA,EAAS,WAAWA,CAAM,EAAE,QAAQ,CAAC,EACrC,MAAMC,EAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOCnF,EAAK,MAAM;AAAA;AAAA,kCAEK6E,EAAsB7E,EAAK,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA,sCAI5BkF,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAgCIL,EACpC7E,EAAK,MACjB,CAAW;AAAA;AAAA;AAAA;AAAA,+CAIoC6E,EACnC7E,EAAK,QACjB,CAAW;AAAA;AAAA;AAAA;AAAA,+CAIoC6E,EACnC7E,EAAK,SACjB,CAAW;AAAA;AAAA;AAAA;AAAA,oDAIyCA,EAAK,UAAU;AAAA;AAAA;AAAA;AAAA,gDAInBA,EAAK,cAAc,IAAIA,EAAK,IAAI;AAAA;AAAA;AAAA,mCAG7CA,EAAK,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAWjDwE,EAAa,UAAYW,EACzB,MAAMC,EAAU,SAAS,iBAAiB,mBAAmB,EAC7D,QAAS7C,EAAI,EAAGA,EAAI,KAAK,MAAMvC,EAAK,MAAM,EAAG,EAAEuC,EAC7C6C,EAAQ7C,CAAC,EAAE,MAAM,KAAO,UAG1B,MAAM8C,EAAY,SAAS,cAAc,oBAAoB,EAE7DA,EAAU,iBAAiB,QAAS,UAAY,CACzCZ,GASHa,EAAgCtF,EAAK,GAAG,EACxCqF,EAAU,UAAY;AAAA;AAAA;AAAA,kBAItBZ,EAAc,KAbdC,EAAe,KAAK1E,CAAI,EACxBuF,EAAyBb,CAAc,EACvCW,EAAU,UAAY;AAAA;AAAA;AAAA,kBAItBZ,EAAc,IAShBjC,GACJ,CAAG,EAED,SAAS,eAAe,YAAY,EAAE,iBAAiB,QAAS,IAAM,CACpEgC,EAAa,UAAU,OAAO,cAAc,EAC5C,SAAS,KAAK,UAAU,OAAO,gBAAgB,CACnD,CAAG,EAEDA,EAAa,iBAAiB,QAASL,GAAS,CAC1CA,EAAM,SAAWK,IACnBA,EAAa,UAAU,OAAO,cAAc,EAC5C,SAAS,KAAK,UAAU,OAAO,gBAAgB,EAErD,CAAG,EAED,SAAS,cAAc,kBAAkB,EAAE,iBAAiB,QAAS,IAAM,CACzEA,EAAa,UAAU,OAAO,cAAc,EAC5C,SAAS,KAAK,UAAU,OAAO,gBAAgB,EAC/CH,EAAgBrE,EAAK,GAAG,CAC5B,CAAG,CACH"}