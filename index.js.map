{"version":3,"file":"index.js","sources":["../src/js/exercises.js","../src/js/footer.js"],"sourcesContent":["\r\nimport handlerStartBtn from './exercises-modal.js';\r\nimport { fetchFilterss, fetchExercisess } from './api.js';\r\nimport { renderQuoteHTML } from './quote.js';\r\nimport { renderExercises } from './exercise.js';\r\n\r\nconst refs = {\r\n  filters: document.querySelector('.filters'),\r\n  musclesBtn: document.querySelector('.muscles-btn'),\r\n  exercisesTitle: document.querySelector('.exercises-title'),\r\n  searchForm: document.querySelector('.search-form'),\r\n  quoteContainer: document.querySelector('.quote'),\r\n  exercises: document.querySelector('.exercises-cards'),\r\n  pagination: document.querySelector('#pagination-container'),\r\n};\r\n\r\nlet page = 1;\r\nlet limitFilters = window.innerWidth < 768 ? 9 : 12;\r\nlet limitExercises = window.innerWidth < 768 ? 8 : 10;\r\n\r\nlet currentFilter = 'Muscles';\r\nlet filter = '';\r\nlet name = '';\r\nlet keyWord = '';\r\nlet localResponse = [];\r\n\r\nrenderQuoteHTML(refs.quoteContainer);\r\nrefs.musclesBtn.classList.add('active-btn');\r\nfetchFilters();\r\n\r\nrefs.filters.addEventListener('click', onFilterChange);\r\nrefs.exercises.addEventListener('click', onExerciseClick);\r\nrefs.searchForm.addEventListener('input', onSearch);\r\nrefs.pagination.addEventListener('click', onPaginationClick);\r\n\r\nasync function fetchFilters(reset = true) {\r\n  if (reset) {\r\n    page = 1;\r\n    refs.exercises.innerHTML = '';\r\n  }\r\n\r\n  const data = await fetchFilterss(\r\n    currentFilter,\r\n    page,\r\n    limitFilters,\r\n    currentFilter\r\n  );\r\n\r\n  if (!data.results.length) return showNoResults();\r\n\r\n  renderFilterCards(data.results);\r\n  renderPagination(data.totalPages);\r\n}\r\n\r\nfunction renderFilterCards(items) {\r\n  refs.exercises.innerHTML = `\r\n    <ul class=\"exercises\">\r\n      ${items\r\n        .map(({ name, filter, imgURL }) => {\r\n          return `\r\n            <li class=\"exercise\">\r\n              <img\r\n                src=\"${imgURL}?w=290&h=242\"\r\n                srcset=\"\r\n                  ${imgURL}?w=335&h=225 335w,\r\n                  ${imgURL}?w=225&h=225 225w,\r\n                  ${imgURL}?w=290&h=242 290w\r\n                \"\r\n                sizes=\"(max-width: 767px) 335px,\r\n                       (min-width: 768px) and (max-width: 1439px) 225px,\r\n                       290px\"\r\n                alt=\"${name}\"\r\n                loading=\"lazy\"\r\n                class=\"exercise-image\"\r\n              />\r\n\r\n              <div class=\"exercise-info\">\r\n                <h2 class=\"exercise-subtitle\">\r\n                  ${name[0].toUpperCase() + name.slice(1)}\r\n                </h2>\r\n                <p class=\"exercise-filter\">${filter}</p>\r\n              </div>\r\n            </li>\r\n          `;\r\n        })\r\n        .join('')}\r\n    </ul>\r\n  `;\r\n};\r\n\r\nfunction onFilterChange(e) {\r\n  const btn = e.target.closest('button');\r\n  if (!btn) return;\r\n\r\n  document.querySelector('.active-btn')?.classList.remove('active-btn');\r\n  btn.classList.add('active-btn');\r\n\r\n  currentFilter = btn.classList.contains('muscles-btn')\r\n    ? 'Muscles'\r\n    : btn.classList.contains('bodyparts-btn')\r\n      ? 'Body parts'\r\n      : 'Equipment';\r\n\r\n  refs.exercisesTitle.textContent = 'Exercises';\r\n  refs.searchForm.style.display = 'none';\r\n\r\n  filter = '';\r\n  name = '';\r\n  keyWord = '';\r\n\r\n  fetchFilters(true);\r\n}\r\n\r\nasync function onExerciseClick(e) {\r\n  const card = e.target.closest('.exercise');\r\n  if (!card) return;\r\n\r\n  const filterEl = card.querySelector('.exercise-filter');\r\n  const nameEl = card.querySelector('.exercise-subtitle');\r\n\r\n  if (!filterEl || !nameEl) return;\r\n\r\n  filter = normalizeFilter(filterEl.textContent);\r\n  name = nameEl.textContent.toLowerCase();\r\n\r\n  refs.exercisesTitle.innerHTML = `\r\n    Exercises / <span>${capitalize(name)}</span>\r\n  `;\r\n  refs.searchForm.style.display = 'block';\r\n\r\n  page = 1;\r\n  fetchExercises(true);\r\n}\r\n\r\nasync function fetchExercises(reset = true) {\r\n  if (reset) {\r\n    page = 1;\r\n    refs.exercises.innerHTML = '';\r\n  }\r\n\r\n  const data = await fetchExercisess(\r\n    filter,\r\n    name,\r\n    keyWord,\r\n    page,\r\n    limitExercises\r\n  );\r\n\r\n  if (!data.results.length) return showNoResults();\r\n\r\n  localResponse = data.results;\r\n  refs.exercises.innerHTML = renderExercises(data.results, false);\r\n  renderPagination(data.totalPages);\r\n}\r\n\r\nfunction onSearch(e) {\r\n  keyWord = e.target.value.trim().toLowerCase();\r\n  page = 1;\r\n  fetchExercises(true);\r\n}\r\n\r\nfunction renderPagination(totalPages) {\r\n  if (totalPages <= 1) {\r\n    refs.pagination.innerHTML = '';\r\n    return;\r\n  }\r\n\r\n  let html = '';\r\n\r\n  html += pageBtn(page - 1, '←', page === 1);\r\n\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    if (i === 1 || i === totalPages || Math.abs(i - page) <= 1) {\r\n      html += pageBtn(i, i, false, i === page);\r\n    } else if (i === page - 2 || i === page + 2) {\r\n      html += `<li class=\"dots\">...</li>`;\r\n    }\r\n  }\r\n\r\n  html += pageBtn(page + 1, '→', page === totalPages);\r\n\r\n  refs.pagination.innerHTML = html;\r\n}\r\n\r\nfunction pageBtn(p, label, disabled = false, active = false) {\r\n  return `\r\n    <li>\r\n      <button\r\n        class=\"pagination-btn ${active ? 'active' : ''}\"\r\n        data-page=\"${p}\"\r\n        ${disabled ? 'disabled' : ''}>\r\n        ${label}\r\n      </button>\r\n    </li>\r\n  `;\r\n}\r\n\r\nfunction onPaginationClick(e) {\r\n  const btn = e.target.closest('.pagination-btn');\r\n  if (!btn) return;\r\n\r\n  const newPage = Number(btn.dataset.page);\r\n  if (newPage === page || newPage < 1) return;\r\n\r\n  page = newPage;\r\n  filter ? fetchExercises(false) : fetchFilters(false);\r\n}\r\n\r\nrefs.exercises.addEventListener('click', e => {\r\n  const btn = e.target.closest('[data-action=\"start\"]');\r\n  if (!btn) return;\r\n\r\n  const exercise = localResponse.find(el => el._id === btn.dataset.id);\r\n  if (exercise) handlerStartBtn(exercise);\r\n});\r\n\r\nfunction normalizeFilter(value) {\r\n  return value.toLowerCase() === 'body parts'\r\n    ? 'bodypart'\r\n    : value.toLowerCase();\r\n}\r\n\r\nfunction showNoResults() {\r\n  refs.exercises.innerHTML = `\r\n    <p class=\"no-results-paragraph\">\r\n      Unfortunately, <span>no results</span> were found.\r\n    </p>\r\n  `;\r\n  refs.pagination.innerHTML = '';\r\n}\r\n\r\nfunction capitalize(str) {\r\n  return str[0].toUpperCase() + str.slice(1);\r\n}\r\n","import { postSubscriptions } from './api.js';\r\n\r\nconst email = document.querySelector('input[name=email]');\r\nconst submitBtnFooter = document.querySelector('.footer-send-button');\r\nconst STORAGE_KEY = 'feedback-form-state';\r\n\r\nconst saveToLocalStorage = () => {\r\n  localStorage.setItem(STORAGE_KEY, JSON.stringify({ email: email.value }));\r\n};\r\n\r\nconst loadFromLocalStorage = () => {\r\n  const data = localStorage.getItem(STORAGE_KEY);\r\n  if (!data) return;\r\n\r\n  const { email: savedEmail } = JSON.parse(data);\r\n  email.value = savedEmail || '';\r\n  submitBtnFooter.disabled = !email.value;\r\n};\r\n\r\nloadFromLocalStorage();\r\n\r\nemail.addEventListener('input', () => {\r\n  saveToLocalStorage();\r\n  submitBtnFooter.disabled = !email.value;\r\n});\r\n\r\nsubmitBtnFooter.addEventListener('click', async e => {\r\n  e.preventDefault();\r\n  if (!email.value) return;\r\n\r\n  try {\r\n    await postSubscriptions(email.value);\r\n\r\n    alert('Success! Welcome to energy.flow world!');\r\n    email.value = '';\r\n    submitBtnFooter.disabled = true;\r\n    localStorage.removeItem(STORAGE_KEY);\r\n  } catch (error) {\r\n    if (error.message === 'EMAIL_EXISTS') {\r\n      alert('Email already exists');\r\n    } else {\r\n      alert('Something went wrong! Please try again later');\r\n    }\r\n  }\r\n});\r\n"],"names":["refs","page","limitFilters","limitExercises","currentFilter","filter","name","keyWord","localResponse","renderQuoteHTML","fetchFilters","onFilterChange","onExerciseClick","onSearch","onPaginationClick","reset","data","fetchFilterss","showNoResults","renderFilterCards","renderPagination","items","imgURL","e","btn","_a","card","filterEl","nameEl","normalizeFilter","capitalize","fetchExercises","fetchExercisess","renderExercises","totalPages","html","pageBtn","i","p","label","disabled","active","newPage","exercise","el","handlerStartBtn","value","str","email","submitBtnFooter","STORAGE_KEY","saveToLocalStorage","loadFromLocalStorage","savedEmail","postSubscriptions","error"],"mappings":"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"}